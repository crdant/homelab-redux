export PROJECT_DIR=${PWD}
PATH=${PROJECT_DIR}/bin:${PATH}
SECRETS_DIR=${PROJECT_DIR}/secrets

watch_file "${SECRETS_DIR}/vault.crt"
watch_file "${SECRETS_DIR}/govc.env"
watch_file "${SECRETS_DIR}/kubeconfig"

export VAULT_ADDR=https://vault.lab.crdant.net
if [ -f "${SECRETS_DIR}/vault.crt" ] ; then
  export VAULT_CACERT=${SECRETS_DIR}/vault.crt
fi

SECRETS_DIR=${PROJECT_DIR}/secrets
if [ -f "${SECRETS_DIR}/govc.env" ] ; then
  set -a
  . ${SECRETS_DIR}/govc.env
  set +a
fi

if [ -f "${SECRETS_DIR}/kubeconfig" ] ; then
  export KUBECONFIG="${SECRETS_DIR}/kubeconfig"  
fi
